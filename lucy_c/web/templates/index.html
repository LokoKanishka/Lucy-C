<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucy-C | Asistente de Pr√≥xima Generaci√≥n</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Panel Izquierdo -->
        <aside class="sidebar-left">
            <div class="sidebar-header">
                <h2>Lucy-C</h2>
                <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: -0.5rem;">Cerebro Local</div>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-button active">
                    <span class="icon">üí¨</span>
                    Chat
                </button>
                <button class="nav-button">
                    <span class="icon">üé§</span>
                    Modo Voz
                </button>
            </nav>

            <div id="moltbot-logs" class="moltbot-logs">
                <div class="logs-header">Logs de Moltbot</div>
                <div id="logs-content" class="logs-content">
                    <div class="log-entry log-success">Moltbot inicializado correctamente.</div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="model-info">
                    <span class="label">Cerebro Actual:</span>
                    <span id="current-model" class="value">Cargando...</span>
                    <span id="current-provider" class="value"
                        style="margin-top:0.25rem; color: var(--accent-purple);">Ollama</span>
                </div>
            </div>
        </aside>

        <!-- √Årea Central de Chat -->
        <main class="chat-area" style="position: relative;">
            <div class="chat-header">
                <h1>Lucy-C</h1>
                <div class="status-indicator">
                    <span class="status-dot"></span>
                    <span id="status-text">Lista</span>
                </div>
            </div>

            <div id="chat-messages" class="chat-messages" tabindex="0">
                <div class="welcome-message">
                    <h2>Hola, soy Lucy</h2>
                    <p style="margin-bottom: 2rem; font-size: 1.1rem;">Tu asistente virtual inteligente, privada y 100%
                        local.</p>
                    <ul>
                        <li>
                            <span
                                style="display: block; font-weight: 700; color: var(--accent-blue); margin-bottom: 0.25rem;">Orquestado
                                por Moltbot</span>
                            Arquitectura desacoplada: el modelo piensa, Moltbot act√∫a.
                        </li>
                        <li>
                            <span
                                style="display: block; font-weight: 700; color: var(--accent-purple); margin-bottom: 0.25rem;">Cerebro
                                Intercambiable</span>
                            Cambi√° de modelo local en cualquier momento sin perder memoria.
                        </li>
                        <li>
                            <span
                                style="display: block; font-weight: 700; color: var(--accent-cyan); margin-bottom: 0.25rem;">Soberan√≠a
                                Digital</span>
                            Tus datos y pensamientos nunca salen de esta m√°quina.
                        </li>
                    </ul>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="scroll-controls" title="Scroll del chat">
                    <button id="scroll-top" class="scroll-fab" title="Subir">‚Üë</button>
                    <button id="scroll-bottom" class="scroll-fab" title="Bajar">‚Üì</button>
                    <input id="scroll-slider" type="range" min="0" max="100" value="100" class="scroll-slider"
                        title="Scroll" />
                </div>

                <div class="mic-meter" title="Nivel de micr√≥fono (RMS)">
                    <div class="mic-meter-bar" id="mic-meter-bar"></div>
                    <div class="mic-meter-thr" id="mic-meter-thr"></div>
                </div>

                <div class="input-wrapper">
                    <textarea id="user-input" placeholder="Escribe un mensaje o pedime que haga algo..."
                        rows="1"></textarea>
                    <div class="input-actions">
                        <button id="voice-btn" class="icon-button" title="Mantener para hablar">
                            <span>üé§</span>
                        </button>
                        <button id="send-btn" class="send-button">
                            Enviar
                        </button>
                    </div>
                </div>
                <div class="input-hint">
                    Presion√° Enter para enviar, Shift+Enter para nueva l√≠nea
                </div>
            </div>
        </main>

        <!-- Panel Derecho (Configuraci√≥n) -->
        <aside class="sidebar-right">
            <div class="settings-header">
                <h3>Configuraci√≥n</h3>
            </div>

            <div class="settings-section">
                <h4>Cerebro (Ollama)</h4>
                <div style="margin-top: 0.5rem;">
                    <select id="model-selector" class="model-dropdown">
                        <option>Cargando modelos...</option>
                    </select>
                </div>
                <div style="margin-top: 0.75rem; font-size: 0.75rem; color: var(--text-secondary);">
                    Lucy usa modelos locales v√≠a Ollama. El intercambio es instant√°neo.
                </div>
            </div>

            <div class="settings-section">
                <h4>Controles de Voz</h4>
                <div class="toggle-group">
                    <label class="toggle-item">
                        <span>Hands‚Äëfree (auto listen)</span>
                        <input type="checkbox" id="handsfree-toggle">
                    </label>
                    <label class="toggle-item">
                        <span>Raw mic (no suppression)</span>
                        <input type="checkbox" id="raw-mic-toggle">
                    </label>
                    <label class="toggle-item">
                        <span>Auto Speak Responses</span>
                        <input type="checkbox" id="auto-speak-toggle" checked>
                    </label>
                </div>
                <div style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.4;">
                    En modo hands-free: habl√°s, paus√°s, y se env√≠a solo.
                </div>
            </div>

            <div class="settings-section">
                <h4>Atajos de Teclado</h4>
                <div
                    style="font-size: 0.8rem; color: var(--text-muted); display: flex; flex-direction: column; gap: 0.6rem;">
                    <div style="display: flex; justify-content: space-between;">
                        <span>Foco en Chat</span>
                        <kbd
                            style="color: var(--text-secondary); background: rgba(255,255,255,0.05); padding: 2px 4px; border-radius: 4px;">Esc</kbd>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Activar Mic</span>
                        <kbd
                            style="color: var(--text-secondary); background: rgba(255,255,255,0.05); padding: 2px 4px; border-radius: 4px;">Ctrl+M</kbd>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Manos Libres</span>
                        <kbd
                            style="color: var(--text-secondary); background: rgba(255,255,255,0.05); padding: 2px 4px; border-radius: 4px;">Ctrl+H</kbd>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Limpiar Vista</span>
                        <kbd
                            style="color: var(--text-secondary); background: rgba(255,255,255,0.05); padding: 2px 4px; border-radius: 4px;">Ctrl+L</kbd>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script src="{{ url_for('static', filename='js/websocket.js') }}"></script>
    <script src="{{ url_for('static', filename='js/scroll.js') }}"></script>
    <script src="{{ url_for('static', filename='js/voice.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>

</html>